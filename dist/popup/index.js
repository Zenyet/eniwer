import{i as l,D as g}from"../chunks/types.js";document.addEventListener("DOMContentLoaded",async()=>{const n=document.getElementById("app-logo-header");n&&(n.innerHTML=l.logo);const e=await chrome.storage.local.get(["thecircle_config","thecircle_stats"]),s=e.thecircle_config||g,a=e.thecircle_stats||{usageCount:0,aiCalls:0};m(s.shortcut);const c=document.getElementById("usageCount"),d=document.getElementById("aiCalls");c&&(c.textContent=String(a.usageCount)),d&&(d.textContent=String(a.aiCalls));const o=document.getElementById("openMenu");o==null||o.addEventListener("click",async()=>{const[t]=await chrome.tabs.query({active:!0,currentWindow:!0});if(t!=null&&t.id)try{await chrome.tabs.sendMessage(t.id,{type:"TOGGLE_MENU"}),window.close()}catch{try{await chrome.scripting.executeScript({target:{tabId:t.id},files:["content.js"]}),await chrome.scripting.insertCSS({target:{tabId:t.id},files:["assets/content.css"]}),await new Promise(i=>setTimeout(i,100)),await chrome.tabs.sendMessage(t.id,{type:"TOGGLE_MENU"}),window.close()}catch(i){console.error("Failed to inject:",i),alert("无法在此页面使用。可能是浏览器限制的页面。")}}});const r=document.getElementById("openSettings");r==null||r.addEventListener("click",()=>{chrome.runtime.openOptionsPage()})});function m(n){const e=document.getElementById("shortcutHint");if(!e)return;const s=n.split("+");e.innerHTML=s.map(a=>`<span class="px-2.5 py-1 rounded text-sm font-medium bg-gray-100 border border-gray-200 text-gray-700 dark:bg-white/10 dark:border-white/20 dark:text-white">${a}</span>`).join('<span class="text-sm text-gray-400 dark:text-white/50">+</span>')+'<span class="ml-2 text-sm text-gray-500 dark:text-white/70">呼出菜单</span>'}
